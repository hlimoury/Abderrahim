<!-- views/editerReclamation.ejs  (NEW) -->
<h1>Modifier la Réclamation</h1>
<a href="/supermarkets/<%= supermarketId %>/instance/<%= instanceId %>/reclamations" class="btn btn-secondary mb-3">Retour</a>

<form action="/supermarkets/<%= supermarketId %>/instance/<%= instanceId %>/reclamations/editer/<%= recItem._id %>" method="POST">
  <div class="form-group mb-2">
    <label>Motif</label>
    <select class="form-control" name="motif" required>
      <% const motifs = [
        'Produit périmé',
        'Produit impropre (abîmé, moisi, odeur suspecte, rupture de la chaîne du froid)',
        'Produits endommagés (emballage déchiré, boîte cabossée, etc.)',
        'Produits non conformes (étiquette, poids indiqué, etc.)',
        'Produit manquant dans un pack ou une boîte',
        'Erreur de prix en caisse (écart entre prix affiché et facturé)',
        'Promotions non appliquées ou mal expliquées',
        'Attente trop longue aux caisses',
        'Erreur de rendu monnaie',
        'Problème avec les moyens de paiement (CB, chèques, bons d’achat, cartes de fidélité…)',
        'Double facturation ou oubli d’annulation d’un article',
        'Manque d’accueil (courtoisie, indifférence)',
        'Comportement inapproprié d’un employé ou agent de sécurité',
        'Manque de disponibilité du personnel pour aider',
        'Hygiène insuffisante (sol, odeurs, toilettes, etc.)',
        'Hygiène et nuisibles (présence de cafards, moucherons, charançons, rats, souris)',
        'Sécurité du magasin (vols, sentiment d’insécurité)',
        'Problèmes de stationnement (parking plein, sécurité, produits manquants)',
        'Nuisances sonores (musique trop forte, annonces trop fréquentes)'
      ]; 
      motifs.forEach(m => { %>
        <option value="<%= m %>" <%= recItem.motif===m?'selected':'' %>><%= m %></option>
      <% }) %>
    </select>
  </div>

  <div class="form-group mb-2">
    <label>Désignation du produit (optionnel)</label>
    <input type="text" class="form-control" name="designationProduit" value="<%= recItem.designationProduit || '' %>" />
  </div>

  <div class="form-group mb-2">
    <label>Date et heure</label>
    <input type="datetime-local" class="form-control" name="dateHeure"
      value="<%= recItem.dateHeure ? new Date(recItem.dateHeure).toISOString().slice(0,16) : '' %>" required />
  </div>

  <div class="form-group mb-2">
    <label>Action entreprise</label>
    <textarea class="form-control" name="action" rows="2"><%= recItem.action || '' %></textarea>
  </div>

  <div class="form-group mb-3">
  <label>Statut</label>
  <select class="form-control" name="statut" required>
    <option value="Non traité" <%= recItem.statut==='Non traité'?'selected':'' %>>Non traité</option>
    <option value="En cours"   <%= recItem.statut==='En cours'?'selected':'' %>>En cours</option>
    <option value="Traité"     <%= recItem.statut==='Traité'?'selected':'' %>>Traité</option>
  </select>
</div>

  <button class="btn btn-primary">Enregistrer</button>
</form>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">